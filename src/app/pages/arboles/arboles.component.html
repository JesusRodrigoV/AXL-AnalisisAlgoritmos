<div class="container">
  <div class="layout">
    <!-- Panel de Control (Izquierda) -->
    <mat-card class="control-panel">
      <mat-card-header>
        <mat-card-title>Árboles Binarios</mat-card-title>
        <mat-card-subtitle>Visualización y Manipulación</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <mat-tab-group>
          <mat-tab label="Árbol">
            <div class="tab-content">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Árbol Binario</mat-label>
                <input
                  matInput
                  [(ngModel)]="arbolInput"
                  placeholder="Ej: 50, 30, 70, 20, 40"
                  [matTooltip]="'Ingresa números separados por comas'"
                />
                <mat-icon
                  matSuffix
                  matTooltip="Los valores se ordenarán automáticamente"
                  >info</mat-icon
                >
              </mat-form-field>
              <button mat-raised-button color="primary" (click)="crearArbol()">
                <mat-icon>account_tree</mat-icon>
                Construir Árbol
              </button>
            </div>
          </mat-tab>

          <!-- Tab de Recorridos -->
          <mat-tab label="Recorridos">
            <div class="tab-content">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Preorden</mat-label>
                <input
                  matInput
                  [(ngModel)]="preOrderInput"
                  placeholder="Ej: 10, 5, 3, 7, 15"
                />
                <button
                  mat-icon-button
                  matSuffix
                  (click)="guardarPreOrder()"
                  [matTooltip]="'Construir usando preorden'"
                >
                  <mat-icon>play_arrow</mat-icon>
                </button>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Inorden</mat-label>
                <input
                  matInput
                  [(ngModel)]="inOrderInput"
                  placeholder="Ej: 3, 5, 7, 10, 15"
                />
                <button
                  mat-icon-button
                  matSuffix
                  (click)="guardarInOrder()"
                  [matTooltip]="'Construir usando inorden'"
                >
                  <mat-icon>play_arrow</mat-icon>
                </button>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Postorden</mat-label>
                <input
                  matInput
                  [(ngModel)]="postOrderInput"
                  placeholder="Ej: 3, 7, 5, 15, 10"
                />
                <button
                  mat-icon-button
                  matSuffix
                  (click)="guardarPostOrder()"
                  [matTooltip]="'Construir usando postorden'"
                >
                  <mat-icon>play_arrow</mat-icon>
                </button>
              </mat-form-field>
            </div>
          </mat-tab>
        </mat-tab-group>

        <mat-divider class="margin-y"></mat-divider>

        <!-- Acciones Generales -->
        <div class="actions">
          <button mat-stroked-button color="primary" (click)="generarRandom()">
            <mat-icon>casino</mat-icon>
            Aleatorio
          </button>
          <button mat-stroked-button color="warn" (click)="limpiarEntradas()">
            <mat-icon>clear_all</mat-icon>
            Limpiar
          </button>
          <button
            mat-stroked-button
            (click)="exportarArbol()"
            [disabled]="!raiz"
          >
            <mat-icon>file_download</mat-icon>
            Exportar
          </button>
          <button mat-stroked-button (click)="importarArbol()">
            <mat-icon>file_upload</mat-icon>
            Importar
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Área del Canvas (Derecha) -->
    <mat-card class="canvas-card">
      <canvas #canvas width="800" height="600"></canvas>
    </mat-card>
  </div>

  <input
    type="file"
    #fileInput
    style="display: none"
    accept=".json"
    (change)="onFileSelected($event)"
  />
</div>

<app-help-button [helpContent]="helpContent" />
